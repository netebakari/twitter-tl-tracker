# twitter-tl-tracker
Twitterのログを取りたい（なるべくたくさん）

# モチベーション
UserStreamが死んでしまったので少なくともそれと同等のツイートのログを取りたい

# 処理概要
* ホームTLを1分ごとに1回取得し、S3に格納する
* 自分がフォローしている人を一定時間（30分～1時間程度）に1回取得し、巡回するユーザーのリストを作成する
* このリストに従い、ユーザーTLを取得してS3に格納する
* ツイートのデータを後からマージして1日分のツイートのログとする

# 動作環境
* Lambda 
  * 今のところ処理は全部Lambda(Node.js v8.10)で書いている
* SQS
  * 定期的にユーザーIDを書いたメッセージをSQSに大量に投入している。これがユーザーTL取得のスケジュールになる
* DynamoDB
  * ホームTLおよびユーザーTLをどこまで取得したか管理するためにDynamoDBのテーブルを1件利用している。レコードのサイズが非常に小さいためRCU/WCUは5程度で余裕
* S3
  * ツイートの出力先
  * 取得したツイートはJSON形式で `/fragments` 以下に格納する（Lambdaが1回起動するごとに1個作られる）
  * これを1日単位でマージして定期的に `/tweets` 以下に格納する

# Todo
* マージ処理を書く
* Configにベタ書きするのをやめて環境変数にする
